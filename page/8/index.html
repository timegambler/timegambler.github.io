<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;page&#x2F;8&#x2F;index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="timegambler">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/8/"/>





  <title>Hexo</title>
  








<meta name="generator" content="Hexo 4.1.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E6%9F%B1%E5%BD%A2%E5%9B%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="timegambler">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E6%9F%B1%E5%BD%A2%E5%9B%BE/" itemprop="url">matplotlib数据可视化之柱形图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-22T22:00:25+08:00">
                2019-12-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="matplotlib数据可视化之柱形图"><a href="#matplotlib数据可视化之柱形图" class="headerlink" title="matplotlib数据可视化之柱形图"></a>matplotlib数据可视化之柱形图</h1><p>I、柱状图<br>1、pyplot.bar函数</p>
<pre><code>matplotlib.pyplot.bar(x, height, width=0.8, bottom=None, *, align=&apos;center&apos;, data=None, **kwargs)</code></pre><p>2、主要参数说明</p>
<p><img src="/.com//1_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E6%9F%B1%E5%BD%A2%E5%9B%BE.png" alt></p>
<p>3、官方文档直达链接<br><a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.bar.html?highlight=bar#matplotlib.pyplot.bar" target="_blank" rel="noopener">https://matplotlib.org/api/_as_gen/matplotlib.pyplot.bar.html?highlight=bar#matplotlib.pyplot.bar</a><br>4、相关代码测试<br>①、图形1</p>
<pre><code>import matplotlib.pyplot as plt
import matplotlib.mlab as mlab
import seaborn as sns
import numpy as np
import pandas as pd

&apos;&apos;&apos;
matplotlib.pyplot.bar(x, height, width=0.8, bottom=None, *, align=&apos;center&apos;, data=None, **kwargs)[source]
&apos;&apos;&apos;
# 解决中文不能在图片中显示的问题
plt.rcParams[&apos;font.sans-serif&apos;] = [&apos;SimHei&apos;]

x_data = [&apos;2011&apos;, &apos;2012&apos;, &apos;2013&apos;, &apos;2014&apos;, &apos;2015&apos;, &apos;2016&apos;, &apos;2017&apos;]
y_data = [58000, 60200, 63000, 71000, 84000, 90500, 107000]
y_data2 = [52000, 54200, 51500, 58300, 56800, 59500, 62700]
# x表示起始位置
plt.bar(x=x_data, height=y_data, )
plt.show()</code></pre><p><img src="/.com//2_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E6%9F%B1%E5%BD%A2%E5%9B%BE.png" alt></p>
<p>②、图形2</p>
<pre><code># height只是代表高度，不代表数值，width代表宽度比例，因此范围是0-1，bottom代表y轴启始值
plt.bar(x=x_data, height=y_data, width=0.5, bottom=100000)
plt.show()</code></pre><p><img src="/.com//3_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E6%9F%B1%E5%BD%A2%E5%9B%BE.png" alt></p>
<p>③、图形3</p>
<pre><code># 多个柱值叠加
plt.bar(x_data, y_data)
plt.bar(x_data, y_data2)
plt.show()</code></pre><p><img src="/.com//4_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E6%9F%B1%E5%BD%A2%E5%9B%BE.png" alt></p>
<p>④、图形4</p>
<pre><code># 多个柱并列
# 因为原始值是字符串类型，无法将x轴进行偏倚，所以先转换成普通值，后面使用tick_label修改命名即可
x_range = np.arange(7)
plt.bar(x=x_range, height=y_data, width=0.3, tick_label=x_data)# x只表示位置关系，因此加上0.3，等于将图像偏移0.3
plt.bar(x=x_range+0.3, height=y_data2, width=0.3)
plt.show()</code></pre><p><img src="/.com//5_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E6%9F%B1%E5%BD%A2%E5%9B%BE.png" alt></p>
<p>⑤、图形5</p>
<pre><code># 绘制水平柱状图
x_range = np.arange(7)# 使用barh函数
plt.barh(x_range, y_data, tick_label=x_data, color=&apos;y&apos;)
plt.show()</code></pre><p><img src="/.com//6_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E6%9F%B1%E5%BD%A2%E5%9B%BE.png" alt></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E7%94%BB%E5%B8%83%E5%8F%8A%E5%AD%90%E5%9B%BE%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="timegambler">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E7%94%BB%E5%B8%83%E5%8F%8A%E5%AD%90%E5%9B%BE%E5%A4%84%E7%90%86/" itemprop="url">matplotlib数据可视化之画布及子图处理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-22T22:00:24+08:00">
                2019-12-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="matplotlib数据可视化之画布及子图处理"><a href="#matplotlib数据可视化之画布及子图处理" class="headerlink" title="matplotlib数据可视化之画布及子图处理"></a>matplotlib数据可视化之画布及子图处理</h1><p>I、画布<br>1、pyplot.figure()函数</p>
<pre><code>matplotlib.pyplot.figure(num=None, figsize=None, dpi=None, facecolor=None, edgecolor=None, frameon=True, FigureClass=&lt;class &apos;matplotlib.figure.Figure&apos;&gt;, clear=False, **kwargs)</code></pre><pre><code>matplotlib.pyplot.subplot(*args, **kwargs)</code></pre><p>2、主要参数说明</p>
<p><img src="/.com//1_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E7%94%BB%E5%B8%83%E5%8F%8A%E5%AD%90%E5%9B%BE%E5%A4%84%E7%90%86.png" alt></p>
<p>3、官方文档直达链接<br><a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.figure.html?highlight=figure#matplotlib.pyplot.figure" target="_blank" rel="noopener">https://matplotlib.org/api/_as_gen/matplotlib.pyplot.figure.html?highlight=figure#matplotlib.pyplot.figure</a><br>4、相关代码测试<br>1、图形1</p>
<pre><code>import matplotlib.pyplot as plt
import matplotlib.mlab as mlab
import seaborn as sns
import numpy as np
import pandas as pd

&apos;&apos;&apos;
matplotlib.pyplot.figure(num=None, figsize=None, dpi=None, facecolor=None, edgecolor=None, frameon=True, FigureClass=&lt;class &apos;matplotlib.figure.Figure&apos;&gt;, clear=False, **kwargs)[source]
&apos;&apos;&apos;

# 解决中文不能在图片中显示的问题
plt.rcParams[&apos;font.sans-serif&apos;] = [&apos;SimHei&apos;]
# 用来正常显示负号
plt.rcParams[&apos;axes.unicode_minus&apos;] = False

#
plt.figure()
x_range = np.arange(7)
y_range = np.random.randint(1, 7, size=7)
plt.plot(y_range)
plt.show()</code></pre><p><img src="/.com//2_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E7%94%BB%E5%B8%83%E5%8F%8A%E5%AD%90%E5%9B%BE%E5%A4%84%E7%90%86.png" alt></p>
<p>2、图形2</p>
<pre><code>#修改参数plt.figure(figsize=(2, 2), dpi=100)
x_range = np.arange(7)
y_range = np.random.randint(1, 7, size=7)
plt.plot(x_range, y_range)
plt.show()</code></pre><p><img src="/.com//3_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E7%94%BB%E5%B8%83%E5%8F%8A%E5%AD%90%E5%9B%BE%E5%A4%84%E7%90%86.png" alt></p>
<p>II、子图切割<br>1、subplot函数方法</p>
<pre><code>matplotlib.pyplot.subplot(*args, **kwargs)</code></pre><p>2、主要参数</p>
<p><img src="/.com//4_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E7%94%BB%E5%B8%83%E5%8F%8A%E5%AD%90%E5%9B%BE%E5%A4%84%E7%90%86.png" alt></p>
<p>3、官方文档链接<br><a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.subplot.html?highlight=subplot#matplotlib.pyplot.subplot" target="_blank" rel="noopener">https://matplotlib.org/api/_as_gen/matplotlib.pyplot.subplot.html?highlight=subplot#matplotlib.pyplot.subplot</a><br>4、简单测试<br>①图形1</p>
<pre><code>plt.figure(figsize=(8, 8))
x_range = np.arange(7)
y_range = np.random.randint(1, 7, size=7)
plt.subplot(221)
plt.plot(x_range, y_range)
plt.subplot(222)
plt.plot(x_range, np.random.randint(1, 7, size=7))
plt.subplot(223)
plt.plot(x_range, np.random.randint(1, 7, size=7))
plt.show()</code></pre><p><img src="/.com//5_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E7%94%BB%E5%B8%83%E5%8F%8A%E5%AD%90%E5%9B%BE%E5%A4%84%E7%90%86.png" alt></p>
<p>②、图形2</p>
<pre><code># 指定多个画布，并创建多个子图，并修改指定子图
plt.figure(1, figsize=(8, 8))
x_range = np.arange(7)
y_range = np.random.randint(1, 7, size=7)
plt.subplot(221)
plt.plot(x_range, y_range)
plt.subplot(222)
plt.plot(x_range, np.random.randint(1, 7, size=7))
plt.subplot(223)
plt.plot(x_range, np.random.randint(1, 7, size=7))
# plt.show()

plt.figure(2, figsize=(4, 4))
plt.subplot(212)
plt.plot(x_range, np.random.randint(1,7,size=7))

# 修改指定画布，及相关子图
plt.figure(1)
plt.subplot(222)
plt.title(&apos;for testfigure&apos;)
plt.show()</code></pre><p><img src="/.com//6_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E7%94%BB%E5%B8%83%E5%8F%8A%E5%AD%90%E5%9B%BE%E5%A4%84%E7%90%86.png" alt></p>
<p>III、子图叠加在主图上<br>1、aexs函数</p>
<pre><code>matplotlib.pyplot.axes(arg=None, **kwargs)</code></pre><p>2、主要参数说明</p>
<p><img src="/.com//7_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E7%94%BB%E5%B8%83%E5%8F%8A%E5%AD%90%E5%9B%BE%E5%A4%84%E7%90%86.png" alt></p>
<p>3、官方文档链接<br><a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.axes.html?highlight=axes#matplotlib.pyplot.axes" target="_blank" rel="noopener">https://matplotlib.org/api/_as_gen/matplotlib.pyplot.axes.html?highlight=axes#matplotlib.pyplot.axes</a><br>4、测试</p>
<p><img src="/.com//8_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E7%94%BB%E5%B8%83%E5%8F%8A%E5%AD%90%E5%9B%BE%E5%A4%84%E7%90%86.png" alt></p>
<pre><code># 在主图上叠加小图形
# 列表前两位数字表示为起始坐标，后两位表示为图形的横纵比（长宽）
x_range = np.arange(7)
y_range = np.random.randint(1, 7, size=7)
plt.figure()
plt.plot(x_range, y_range)
plt.title(&apos;主图&apos;)
plt.axes([0.2, 0.2, 0.2, 0.2])
plt.plot(x_range, y_range)
plt.axes([0.5, 0.5, 0.2, 0.2])
plt.plot(x_range, y_range)</code></pre><p>over！！！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E5%9D%90%E6%A0%87%E5%9B%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="timegambler">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E5%9D%90%E6%A0%87%E5%9B%BE/" itemprop="url">matplotlib数据可视化之坐标图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-22T22:00:22+08:00">
                2019-12-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="matplotlib数据可视化之坐标图"><a href="#matplotlib数据可视化之坐标图" class="headerlink" title="matplotlib数据可视化之坐标图"></a>matplotlib数据可视化之坐标图</h1><p>I、坐标图<br>1、plot函数</p>
<pre><code>matplotlib.pyplot.plot(*args, scalex=True, scaley=True, data=None, **kwargs)</code></pre><p>2、主要参数</p>
<p><img src="/.com//1_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E5%9D%90%E6%A0%87%E5%9B%BE.png" alt></p>
<p>3、官方链接文档<br><a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.plot.html?highlight=plot#matplotlib.pyplot.plot" target="_blank" rel="noopener">https://matplotlib.org/api/_as_gen/matplotlib.pyplot.plot.html?highlight=plot#matplotlib.pyplot.plot</a><br>4、代码测试</p>
<pre><code># 多线多子图
def f(t):
    return np.exp(-t) * np.cos(2 * np.pi * t)


t1 = np.arange(0.0, 5.0, 0.1)
t2 = np.arange(0.0, 5.0, 0.02)
plt.figure(1)
plt.subplot(221)
# plt.plot(t1, f(t1), &apos;bo&apos;, t2, f(t2), &apos;k&apos;)
plt.plot(t1, f(t1), &apos;bo&apos;)
plt.plot(t2, f(t2), &apos;k&apos;)
plt.subplot(222)
plt.plot(t2, np.cos(2 * np.pi * t2), &apos;r--&apos;,  label=&apos;line 1&apos;)
plt.subplot(212)
plt.plot(t1, f(t1), &apos;bo&apos;, t2, f(t2), label=&apos;line 1&apos;)
# plt.plot([1,2,3], [1,2,3], &apos;go-&apos;, label=&apos;line 1&apos;)
plt.show()</code></pre><p><img src="/.com//2_matplotlib%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8B%E5%9D%90%E6%A0%87%E5%9B%BE.gif" alt></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/mysql%E5%AD%A6%E4%B9%A0%E8%AE%AD%E7%BB%83%E8%AE%B0%E5%BD%95%E5%8F%8A%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="timegambler">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/mysql%E5%AD%A6%E4%B9%A0%E8%AE%AD%E7%BB%83%E8%AE%B0%E5%BD%95%E5%8F%8A%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/" itemprop="url">mysql学习训练记录及笔记（一）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-22T22:00:21+08:00">
                2019-12-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="mysql学习训练记录及笔记（一）"><a href="#mysql学习训练记录及笔记（一）" class="headerlink" title="mysql学习训练记录及笔记（一）"></a>mysql学习训练记录及笔记（一）</h1><p>写这篇的缘由是因为感觉本地保存容易误删，存到云盘中，还要下载打开，麻烦，因此记录在博客中<br><a href="mysql学习训练记录及笔记（一）">mysql学习训练记录及笔记（一）</a><br><a href="mysql学习训练记录及笔记（二）">mysql学习训练记录及笔记（二）</a><br><a href="mysql学习训练记录及笔记（三）">mysql学习训练记录及笔记（三）</a><br>I、建表语句</p>
<pre><code>--建表
--学生表
CREATE TABLE `Student`(
    `s_id` VARCHAR(20),
    `s_name` VARCHAR(20) NOT NULL DEFAULT &apos;&apos;,
    `s_birth` VARCHAR(20) NOT NULL DEFAULT &apos;&apos;,
    `s_sex` VARCHAR(10) NOT NULL DEFAULT &apos;&apos;,
    PRIMARY KEY(`s_id`)
);
--课程表
CREATE TABLE `Course`(
    `c_id`  VARCHAR(20),
    `c_name` VARCHAR(20) NOT NULL DEFAULT &apos;&apos;,
    `t_id` VARCHAR(20) NOT NULL,
    PRIMARY KEY(`c_id`)
);
--教师表
CREATE TABLE `Teacher`(
    `t_id` VARCHAR(20),
    `t_name` VARCHAR(20) NOT NULL DEFAULT &apos;&apos;,
    PRIMARY KEY(`t_id`)
);
--成绩表
CREATE TABLE `Score`(
    `s_id` VARCHAR(20),
    `c_id`  VARCHAR(20),
    `s_score` INT(3),
    PRIMARY KEY(`s_id`,`c_id`)
);
--插入学生表测试数据
insert into Student values(&apos;01&apos; , &apos;赵雷&apos; , &apos;1990-01-01&apos; , &apos;男&apos;);
insert into Student values(&apos;02&apos; , &apos;钱电&apos; , &apos;1990-12-21&apos; , &apos;男&apos;);
insert into Student values(&apos;03&apos; , &apos;孙风&apos; , &apos;1990-05-20&apos; , &apos;男&apos;);
insert into Student values(&apos;04&apos; , &apos;李云&apos; , &apos;1990-08-06&apos; , &apos;男&apos;);
insert into Student values(&apos;05&apos; , &apos;周梅&apos; , &apos;1991-12-01&apos; , &apos;女&apos;);
insert into Student values(&apos;06&apos; , &apos;吴兰&apos; , &apos;1992-03-01&apos; , &apos;女&apos;);
insert into Student values(&apos;07&apos; , &apos;郑竹&apos; , &apos;1989-07-01&apos; , &apos;女&apos;);
insert into Student values(&apos;08&apos; , &apos;王菊&apos; , &apos;1990-01-20&apos; , &apos;女&apos;);
--课程表测试数据
insert into Course values(&apos;01&apos; , &apos;语文&apos; , &apos;02&apos;);
insert into Course values(&apos;02&apos; , &apos;数学&apos; , &apos;01&apos;);
insert into Course values(&apos;03&apos; , &apos;英语&apos; , &apos;03&apos;);

--教师表测试数据
insert into Teacher values(&apos;01&apos; , &apos;张三&apos;);
insert into Teacher values(&apos;02&apos; , &apos;李四&apos;);
insert into Teacher values(&apos;03&apos; , &apos;王五&apos;);

--成绩表测试数据
insert into Score values(&apos;01&apos; , &apos;01&apos; , 80);
insert into Score values(&apos;01&apos; , &apos;02&apos; , 90);
insert into Score values(&apos;01&apos; , &apos;03&apos; , 99);
insert into Score values(&apos;02&apos; , &apos;01&apos; , 70);
insert into Score values(&apos;02&apos; , &apos;02&apos; , 60);
insert into Score values(&apos;02&apos; , &apos;03&apos; , 80);
insert into Score values(&apos;03&apos; , &apos;01&apos; , 80);
insert into Score values(&apos;03&apos; , &apos;02&apos; , 80);
insert into Score values(&apos;03&apos; , &apos;03&apos; , 80);
insert into Score values(&apos;04&apos; , &apos;01&apos; , 50);
insert into Score values(&apos;04&apos; , &apos;02&apos; , 30);
insert into Score values(&apos;04&apos; , &apos;03&apos; , 20);
insert into Score values(&apos;05&apos; , &apos;01&apos; , 76);
insert into Score values(&apos;05&apos; , &apos;02&apos; , 87);
insert into Score values(&apos;06&apos; , &apos;01&apos; , 31);
insert into Score values(&apos;06&apos; , &apos;03&apos; , 34);
insert into Score values(&apos;07&apos; , &apos;02&apos; , 89);
insert into Score values(&apos;07&apos; , &apos;03&apos; , 98);</code></pre><p>II、sql语言训练<br>1、– 查询”01”课程比”02”课程成绩高的学生的信息及课程分数</p>
<pre><code>select
    a.*,
    b.s_score,
    c.s_score
from
    student a join score b on
    a.s_id = b.s_id
    and b.c_id=&apos;01&apos;
    join score c on a.s_id = c.s_id and c.c_id = &apos;02&apos; or c.c_id =null
where
    b.s_score&gt; c.s_score;</code></pre><p>2、查询”01”课程比”02”课程成绩低的学生的信息及课程分数</p>
<pre><code>select a.*, b.s_score, c.s_score
from student a join score b on a.s_id =b.s_id and b.c_id =&apos;01&apos;
join score c on a.s_id = c.s_id and c.c_id = &apos;02&apos;
where b.s_score &lt; c.s_score;</code></pre><p>3、– 查询平均成绩大于等于60分的同学的学生编号和学生姓名和平均成绩</p>
<pre><code>select a.s_id,a.s_name, avg(b.s_score) from student a join score b on a.s_id = b.s_id group by a.s_id,a.s_name having avg(b.s_score)&gt;60;</code></pre><p>4、– 查询平均成绩小于60分的同学的学生编号和学生姓名和平均成绩<br>– (包括有成绩的和无成绩的)</p>
<pre><code>select a.s_id,a.s_name, avg(b.s_score) from student a join score b on a.s_id = b.s_id group by a.s_id,a.s_name having avg(b.s_score)&lt;60
union
select a.s_id,a.s_name,0  from student a where a.s_id not in (select distinct s_id from score); 
;</code></pre><p>5、查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩</p>
<pre><code>select t1.s_id,t1.s_name,count(t2.c_id),sum(t2.s_score) from student t1 join score t2 on t1.s_id = t2.s_id
group by t1.s_id,t1.s_name ;</code></pre><p>6、– 查询”李”姓老师的数量</p>
<pre><code>select count(1) from teacher where t_name like &quot;李%&quot;;</code></pre><p>7、– 查询学过”张三”老师授课的同学的信息</p>
<pre><code>select a.* from student a join score b on a.s_id  = b.s_id join course c on b.c_id = c.c_id join teacher d on c.t_id = d.t_id where d.t_name = &apos;张三&apos;;</code></pre><p>8、– 查询没学过”张三”老师授课的同学的信息</p>
<pre><code>select a.* from student a where a.s_id  not in (
    select s_id from score where c_id = (
        select c_id from course where t_id = (
            select t_id from teacher where t_name =&apos;张三&apos;
        )
    ));</code></pre><p>9、– 查询学过编号为”01”并且也学过编号为”02”的课程的同学的信息</p>
<pre><code>select * from 
    student a 
    where a.s_id in (
    select a.s_id from score a join score b on a.s_id=b.s_id and a.c_id = &apos;01&apos; and b.c_id=&apos;02&apos;);</code></pre><p>10、– 查询学过编号为”01”但是没有学过编号为”02”的课程的同学的信息</p>
<pre><code>select * from student
     where s_id in (
     select a.s_id from score a where a.c_id = &apos;01&apos; and a.s_id not in (
         select b.s_id from score b where b.c_id = &apos;02&apos;)
     );</code></pre><p>11、– 查询没有学全所有课程的同学的信息</p>
<pre><code>select * from
    student a
    where a.s_id not in (
    select s_id from score b group by b.s_id  having count(*) = (select count(distinct c_id) from course)
    )</code></pre><p>12、– 查询至少有一门课与学号为”01”的同学所学相同的同学的信息</p>
<pre><code>select * from student
    where s_id in (
     select s_id from score where  c_id in (select c_id from score where s_id = &apos;01&apos;)
    );</code></pre><p>13、 - 查询和”01”号的同学学习的课程完全相同的其他同学的信息、</p>
<pre><code>select * from student
where s_id in
(select s_id from score group by s_id having group_concat(c_id order by c_id) = 
(select group_concat(c_id order by c_id) from score  where s_id = &apos;01&apos;)
)</code></pre><p>14、查询没学过”张三”老师讲授的任一门课程的学生姓名</p>
<pre><code>select t1.s_name from student t1 where t1.s_id not in
(select s_id from score t2 where t2.c_id in (select c_id from course a join  teacher b on a.t_id=b.t_id where t_name =&apos;张三&apos;))</code></pre><p>15、–查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩</p>
<pre><code>select t1.s_id ,t1.s_name,avg(t2.s_score) from student t1 join score t2 on t1.s_id=t2.s_id where t2.s_score&lt;60 group by t1.s_id having count(t2.s_score)&gt;1;</code></pre><p>– 16、检索”01”课程分数小于60，按分数降序排列的学生信息</p>
<pre><code>select * from student t1 join score t2 on t1.s_id = t2.s_id where t2.s_score &lt; 60 and t2.c_id = &apos;01&apos; order by t2.s_score desc;</code></pre><p>– 17、按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩</p>
<pre><code>select s_id,(select s_score from score where t1.s_id=s_id and c_id=&apos;01&apos;) as a,
(select s_score from score where t1.s_id=s_id and c_id=&apos;02&apos;) as b,
(select s_score from score where t1.s_id= s_id and c_id=&apos;03&apos;) as c,
avg(s_score)
from score t1 group by s_id order by avg(s_score) desc;</code></pre><p>– 18、查询各科成绩最高分、最低分和平均分：以如下形式显示：课程ID，课程name，最高分，最低分，平均分，及格率，中等率，优良率，优秀率– 及格为&gt;=60，中等为：70-80，优良为：80-90，优秀为：&gt;=90</p>
<pre><code>select score.c_id,course.c_name,max(s_score),min(s_score),avg(s_score),
(sum(s_score&gt;=60)/count(s_score)),
(sum(case when  s_score between 70 and 80 then 1 else 0 end)/count(s_score)),
(sum(case when  s_score between 80 and 90 then 1 else 0 end)/count(s_score)),
(sum(case when  s_score &gt;=90 then 1 else 0 end)/count(s_score))
from score join course on score.c_id = course.c_id
group by c_id</code></pre><p>19、按各科成绩进行排序，并显示排名</p>
<pre><code>select @i:= @i + 1,s_score,s_id,c_id
from score,(select @i:=0) as a order by s_score desc</code></pre><p>20、查询学生的总成绩并进行排名</p>
<pre><code>select @i:=@i+1,sum_score,s_id
from (
select s_id,sum(s_score) as sum_score
from score group by s_id order by sum(s_score) desc
) b,(select @i:=0) a</code></pre><p>III、总结一下，前20题涉及知识点包括<br>1、各语句执行顺序：<br>sql语句顺序</p>
<pre><code>&lt;SELECT clause&gt; [&lt;FROM clause&gt;] [&lt;WHERE clause&gt;] [&lt;GROUP BY clause&gt;] [&lt;HAVING clause&gt;] [&lt;ORDER BY clause&gt;] [&lt;LIMIT clause&gt;]</code></pre><p>数据库底层执行顺序</p>
<p><img src="/.com//1_mysql%E5%AD%A6%E4%B9%A0%E8%AE%AD%E7%BB%83%E8%AE%B0%E5%BD%95%E5%8F%8A%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89.png" alt></p>
<p>2、子查询<br>a、   where型子查询：指把内部查询的结果作为外层查询的比较条件。 b、   from型子查询：把内层的查询结果当成临时表，供外层sql再次查询。 c、 in子查询：内层查询语句仅返回一个数据列，这个数据列的值将供外层查询语句进行比较。 d、 exists子查询：把外层的查询结果，拿到内层，看内层是否成立，简单来说后面的返回true,外层（也就是前面的语句）才会执行，否则不执行。 e、 any子查询：只要满足内层子查询中的任意一个比较条件，就返回一个结果作为外层查询条件。 f、  all子查询：内层子查询返回的结果需同时满足所有内层查询条件。 g、 比较运算符子查询：子查询中可以使用的比较运算符如 “&gt;” “&lt;” “= ” “!=”<br>3、group_concat连接列数据，需要配合groupby使用<br>4、@符号使用，声明用户变量<br>oracle中有rownum这个伪列，自增序号，但是mysql中没有，因此借用@进行递增赋值<br>注意需要先进行子查询排序，再补加序列号，因为@i：=@i+1赋值语句执行在order by之前<br>在from中增加select @i:=0,是进行初始赋值<br>5、case when<br>通常使用方法为case when xxx then [value] else [value] end</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/mysql%E5%AD%A6%E4%B9%A0%E8%AE%AD%E7%BB%83%E8%AE%B0%E5%BD%95%E5%8F%8A%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="timegambler">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/mysql%E5%AD%A6%E4%B9%A0%E8%AE%AD%E7%BB%83%E8%AE%B0%E5%BD%95%E5%8F%8A%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/" itemprop="url">mysql学习训练记录及笔记（二）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-22T22:00:21+08:00">
                2019-12-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="mysql学习训练记录及笔记（二）"><a href="#mysql学习训练记录及笔记（二）" class="headerlink" title="mysql学习训练记录及笔记（二）"></a>mysql学习训练记录及笔记（二）</h1><p>接着训练一<br><a href="mysql学习训练记录及笔记（一）">mysql学习训练记录及笔记（一）</a><br><a href="mysql学习训练记录及笔记（二）">mysql学习训练记录及笔记（二）</a><br><a href="mysql学习训练记录及笔记（三）">mysql学习训练记录及笔记（三）</a><br>I、sql训练<br>21、查询不同老师所教不同课程平均分从高到低显示</p>
<pre><code>select
    t3.t_id,
    t3.t_name,
    avg(t1.s_score) as avg_score
from
    score t1 
    left join course t2 on t1.c_id = t2.c_id 
    left join teacher t3 on t2.t_id = t3.t_id
group by
    t3.t_id,
    t3.t_name
order by
    avg_score desc;</code></pre><p>22、查询所有课程的成绩第2名到第3名的学生信息及该课程成绩<br>这里学习到rank（）函数</p>
<pre><code>select * from student t1 join
(select s_id,s_score,c_id, (rank() over(partition by c_id order by s_score desc)) as 排名
from score where 排名 between 2 and 3 ) as t2 on t1.s_id =t2.s_id</code></pre><p>23、统计各科成绩各分数段人数：课程编号,课程名称,[100-85],[85-70],[70-60],[0-60]及所占百分比</p>
<pre><code>select t2.c_id,t2.c_name,
(sum(case when s_score between 85 and 100 then 1 else 0 end)/count(s_score))*100 a,
(sum(case when s_score &lt;85 and s_score&gt;70 then 1 else 0 end)/count(s_score))*100 b,
(sum(case when s_score between 60 and 70 then 1 else 0 end)/count(s_score))*100 c,
(sum(case when s_score between 0 and 60 then 1 else 0 end)/count(s_score))*100 d
from score t1 join course t2 on t1.c_id=t2.c_id
group by t1.c_id</code></pre><p>24、查询学生平均成绩及其名次</p>
<pre><code>select avg(s_score), rank() over(order by avg(s_score)) from score group by s_id</code></pre><p>25、查询各科成绩前三名的记录</p>
<pre><code>select * 
from
(select c_id,s_id,dense_rank() over(partition by c_id order by s_score) as ran from score) t1
where t1.ran&lt;4</code></pre><p>26、查询每门课程被选修的学生数</p>
<pre><code>select c_id,count(s_id) from score group by c_id</code></pre><p>27、查询出只有两门课程的全部学生的学号和姓名</p>
<pre><code>select s_id,s_name from student where s_id in
(select s_id from score group by s_id having  count(s_score) = 2)</code></pre><p>28、查询男生、女生人数</p>
<pre><code>select s_sex,count(s_id) from student group by s_sex;</code></pre><p>29、查询名字中含有”风”字的学生信息</p>
<pre><code>select * from student where s_name like &apos;%风%&apos;</code></pre><p>30、查询同名同性学生名单，并统计同名人数</p>
<pre><code>select s_name,count(s_id) as count_num from student group by s_name having count(s_id)&gt;1</code></pre><p>31、查询1990年出生的学生名单</p>
<pre><code>select * from student where s_birth like &apos;1990%&apos;</code></pre><p>32、查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列<br>连续两个条件排序，只需要加个条件即可</p>
<pre><code>select avg(s_score) from score group by c_id order by avg(s_score) desc,c_id asc;</code></pre><p>33、查询平均成绩大于等于85的所有学生的学号、姓名和平均成绩</p>
<pre><code>select t1.s_id,t1.s_name,avg(t2.s_score) as avg_score from student t1 join score t2 on t1.s_id=t2.s_id group by t1.s_id having avg_score &gt;=85</code></pre><p>34、查询课程名称为”数学”，且分数低于60的学生姓名和分数</p>
<pre><code>select t1.s_name,t2.s_score from student t1 join score t2 on t1.s_id =t2.s_id join course t3 on t2.c_id =t3.c_id where t3.c_name=&apos;数学&apos; and t2.s_score &lt;60</code></pre><p>35、查询所有学生的课程及分数情况；</p>
<pre><code>select t1.s_id,t2.s_score as 语文,t3.s_score as 数学, t4.s_score as 英语,(select sum(s_score) from score group by s_id having s_id=t1.s_id) as 总分  
from student t1 
left join score t2 on t1.s_id=t2.s_id and t2.c_id=&apos;01&apos; 
left join score t3 on t1.s_id=t3.s_id and t3.c_id=&apos;02&apos;
left join score t4 on t1.s_id=t4.s_id and t4.c_id=&apos;03&apos;</code></pre><p>36、查询任何一门课程成绩在70分以上的姓名、课程名称和分数</p>
<pre><code>select t3.s_name,t2.c_name,t1.s_score from score t1 join course  t2 on t1.c_id=t2.c_id join student t3 on t1.s_id = t3.s_id where s_score &gt;70</code></pre><p>37、查询不及格的课程</p>
<pre><code>select * from course t1 join  score t2 on t1.c_id=t2.c_id where t2.s_score &lt; 60</code></pre><p>38、查询课程编号为01且课程成绩在80分以上的学生的学号和姓名；</p>
<pre><code>select t2.s_id,t2.s_name from score t1 join student t2 on t1.s_id=t2.s_id where t1.c_id=&apos;01&apos; and t1.s_score&gt;80</code></pre><p>39、求每门课程的学生人数</p>
<pre><code>select c_id,count(s_id) from score group by c_id</code></pre><p>40、查询选修”张三”老师所授课程的学生中，成绩最高的学生信息及其成绩</p>
<pre><code>select * from
(
select t1.*,t2.s_score,rank() over(order by t2.s_score desc) ran
from student t1 join score t2 on t1.s_id=t2.s_id 
where t2.c_id in (select c_id from course  natural join teacher where t_name = &apos;张三&apos;)
) ta where ta.ran =1</code></pre><p>II、总结一下<br>1、前面二十道会了之后，后面几乎没有什么难度，主要在于思路，已经尽量减少多表关联，增加查询速度<br>2、开窗函数，这是mysql新特性，可以添加rank等，解决排序等问题</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/mysql%E5%AD%A6%E4%B9%A0%E8%AE%AD%E7%BB%83%E8%AE%B0%E5%BD%95%E5%8F%8A%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="timegambler">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/mysql%E5%AD%A6%E4%B9%A0%E8%AE%AD%E7%BB%83%E8%AE%B0%E5%BD%95%E5%8F%8A%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89/" itemprop="url">mysql学习训练记录及笔记（三）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-22T22:00:21+08:00">
                2019-12-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="mysql学习训练记录及笔记（三）"><a href="#mysql学习训练记录及笔记（三）" class="headerlink" title="mysql学习训练记录及笔记（三）"></a>mysql学习训练记录及笔记（三）</h1><p>接着训练二<br><a href="mysql学习训练记录及笔记（一）">mysql学习训练记录及笔记（一）</a><br><a href="mysql学习训练记录及笔记（二）">mysql学习训练记录及笔记（二）</a><br><a href="mysql学习训练记录及笔记（三）">mysql学习训练记录及笔记（三）</a><br>I、sql训练<br>41、查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩</p>
<pre><code>select * from score t1 join score t2 on t1.s_id=t2.s_id where t1.s_score =t2.s_score and t1.c_id &lt;&gt; t2.c_id</code></pre><p>42、查询每门功成绩最好的前两名</p>
<pre><code>select t1.s_id,t1.c_id,t1.s_score,t1.ran
from (
select s_id,c_id,s_score,rank() over(partition by c_id order by s_score) ran from score 
) t1
where t1.ran &lt;3</code></pre><p>43、统计每门课程的学生选修人数（超过5人的课程才统计）。要求输出课程号和选修人数，查询结果按人数降序排列，若人数相同，按课程号升序排列</p>
<pre><code>select c_id,count(s_id) count_n from score group by c_id having count_n&gt;5 order by count_n desc</code></pre><p>44、检索至少选修两门课程的学生学号</p>
<pre><code>select s_id from score group by s_id having count(c_id)&gt;1</code></pre><p>45、查询选修了全部课程的学生信息</p>
<pre><code>select t1.* from student t1 join score t2 on  t1.s_id =t2.s_id group by s_id having count(c_id) &gt;2</code></pre><p>46、查询各学生的年龄<br>– 按照出生日期来算，当前月日 &lt; 出生年月的月日则，年龄减一</p>
<pre><code>select s_name,s_birth,
(date_format(now(),&apos;%Y&apos;)-date_format(s_birth,&apos;%Y&apos;)-(case when date_format(s_birth,&apos;%m%d&apos;)&lt;date_format(now(),&apos;%m%d&apos;) then 1 else 0 end)) as 年龄
from student</code></pre><p>47、查询本周过生日的学生</p>
<pre><code>select * from student where week(s_birth)=week(now())</code></pre><p>48、查询下周过生日的学生</p>
<pre><code>select * from student where week(s_birth)=week(now())+1</code></pre><p>49、查询本月过生日的学生</p>
<pre><code>select * from student where month(s_birth) = month(now())</code></pre><p>50、查询下月过生日的学生</p>
<pre><code>select * from student where month(s_birth) = month(now())+1</code></pre><p>II、个人总结（本套过于简单）<br>1、日期相关函数</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="timegambler">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/" itemprop="url">机器学习之内存优化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-22T22:00:21+08:00">
                2019-12-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="机器学习之内存优化"><a href="#机器学习之内存优化" class="headerlink" title="机器学习之内存优化"></a>机器学习之内存优化</h1><p>因为训练数据集往往比较大，而内存会出现不够用的情况，可以通过修改特征的数据类型，从而达到优化压缩的目的<br>I、普通方法，直接复制调用就行<br>参考网址：<a href="https://www.kaggle.com/gemartin/load-data-reduce-memory-usage" target="_blank" rel="noopener">https://www.kaggle.com/gemartin/load-data-reduce-memory-usage</a></p>
<pre><code>def reduce_mem_usage(df, verbose=True):
    numerics = [&apos;int16&apos;, &apos;int32&apos;, &apos;int64&apos;, &apos;float16&apos;, &apos;float32&apos;, &apos;float64&apos;]
    start_mem = df.memory_usage().sum() / 1024**2    
    for col in df.columns:
        col_type = df[col].dtypes
        if col_type in numerics:
            c_min = df[col].min()
            c_max = df[col].max()
            if str(col_type)[:3] == &apos;int&apos;:
                if c_min &gt; np.iinfo(np.int8).min and c_max &lt; np.iinfo(np.int8).max:
                    df[col] = df[col].astype(np.int8)
                elif c_min &gt; np.iinfo(np.int16).min and c_max &lt; np.iinfo(np.int16).max:
                    df[col] = df[col].astype(np.int16)
                elif c_min &gt; np.iinfo(np.int32).min and c_max &lt; np.iinfo(np.int32).max:
                    df[col] = df[col].astype(np.int32)
                elif c_min &gt; np.iinfo(np.int64).min and c_max &lt; np.iinfo(np.int64).max:
                    df[col] = df[col].astype(np.int64)  
            else:
                if c_min &gt; np.finfo(np.float16).min and c_max &lt; np.finfo(np.float16).max:
                    df[col] = df[col].astype(np.float16)
                elif c_min &gt; np.finfo(np.float32).min and c_max &lt; np.finfo(np.float32).max:
                    df[col] = df[col].astype(np.float32)
                else:
                    df[col] = df[col].astype(np.float64)    
    end_mem = df.memory_usage().sum() / 1024**2
    if verbose: print(&apos;Mem. usage decreased to {:5.2f} Mb ({:.1f}% reduction)&apos;.format(end_mem, 100 * (start_mem - end_mem) / start_mem))
    return df</code></pre><p>2、封装完成的类<br>参考网址：<a href="https://www.kaggle.com/wkirgsn/fail-safe-parallel-memory-reduction" target="_blank" rel="noopener">https://www.kaggle.com/wkirgsn/fail-safe-parallel-memory-reduction</a></p>
<pre><code>&quot;&quot;&quot;reducing.py
Author: Kirgsn, 2018

Use like this:调用方式:
&gt;&gt;&gt; import reducing
&gt;&gt;&gt; df = reducing.Reducer().reduce(df)
&quot;&quot;&quot;
import numpy as np
import pandas as pd
import time
import gc
from joblib import Parallel, delayed


def measure_time_mem(func):
    def wrapped_reduce(self, df, *args, **kwargs):
        # pre
        mem_usage_orig = df.memory_usage().sum() / self.memory_scale_factor
        start_time = time.time()
        # exec
        ret = func(self, df, *args, **kwargs)
        # post
        mem_usage_new = ret.memory_usage().sum() / self.memory_scale_factor
        end_time = time.time()
        print(f&apos;reduced df from {mem_usage_orig:.4f} MB &apos;
              f&apos;to {mem_usage_new:.4f} MB &apos;
              f&apos;in {(end_time - start_time):.2f} seconds&apos;)
        gc.collect()
        return ret
    return wrapped_reduce


class Reducer:
    &quot;&quot;&quot;
    Class that takes a dict of increasingly big numpy datatypes to transform
    the data of a pandas dataframe into, in order to save memory usage.
    &quot;&quot;&quot;
    memory_scale_factor = 1024**2  # memory in MB

    def __init__(self, conv_table=None, use_categoricals=True, n_jobs=-1):
        &quot;&quot;&quot;
        :param conv_table: dict with np.dtypes-strings as keys
        :param use_categoricals: Whether the new pandas dtype &quot;Categoricals&quot;
                shall be used
        :param n_jobs: Parallelization rate
        &quot;&quot;&quot;

        self.conversion_table = \
            conv_table or {&apos;int&apos;: [np.int8, np.int16, np.int32, np.int64],
                           &apos;uint&apos;: [np.uint8, np.uint16, np.uint32, np.uint64],
                           &apos;float&apos;: [np.float32, ]}
        self.use_categoricals = use_categoricals
        self.n_jobs = n_jobs

    def _type_candidates(self, k):
        for c in self.conversion_table[k]:
            i = np.iinfo(c) if &apos;int&apos; in k else np.finfo(c)
            yield c, i

    @measure_time_mem
    def reduce(self, df, verbose=False):
        &quot;&quot;&quot;Takes a dataframe and returns it with all data transformed to the
        smallest necessary types.

        :param df: pandas dataframe
        :param verbose: If True, outputs more information
        :return: pandas dataframe with reduced data types
        &quot;&quot;&quot;
        ret_list = Parallel(n_jobs=self.n_jobs)(delayed(self._reduce)
                                                (df[c], c, verbose) for c in
                                                df.columns)

        del df
        gc.collect()
        return pd.concat(ret_list, axis=1)

    def _reduce(self, s, colname, verbose):
        # skip NaNs
        if s.isnull().any():
            if verbose: print(f&apos;{colname} has NaNs - Skip..&apos;)
            return s
        # detect kind of type
        coltype = s.dtype
        if np.issubdtype(coltype, np.integer):
            conv_key = &apos;int&apos; if s.min() &lt; 0 else &apos;uint&apos;
        elif np.issubdtype(coltype, np.floating):
            conv_key = &apos;float&apos;
        else:
            if isinstance(coltype, object) and self.use_categoricals:
                # check for all-strings series
                if s.apply(lambda x: isinstance(x, str)).all():
                    if verbose: print(f&apos;convert {colname} to categorical&apos;)
                    return s.astype(&apos;category&apos;)
            if verbose: print(f&apos;{colname} is {coltype} - Skip..&apos;)
            return s
        # find right candidate
        for cand, cand_info in self._type_candidates(conv_key):
            if s.max() &lt;= cand_info.max and s.min() &gt;= cand_info.min:
                if verbose: print(f&apos;convert {colname} to {cand}&apos;)
                return s.astype(cand)

        # reaching this code is bad. Probably there are inf, or other high numbs
        print(f&quot;WARNING: {colname} doesn&apos;t fit the grid with \nmax: {s.max()} &quot;
              f&quot;and \nmin: {s.min()}&quot;)
        print(&apos;Dropping it..&apos;)</code></pre><p>3、可以将其转换为feather格式，降低内存占用<br>ps：转为feather格式的化需要配合pyarrow这个包，所以 pip install pyarrow<br>用法很简单，结合1或者2方法先压缩数据类型，然后再生成feather文件</p>
<pre><code># 生成一个feather文件
your_df.to_feather(path)# 读取feather文件</code></pre><pre><code>pd.read_feather(path)</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/github%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="timegambler">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/github%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/" itemprop="url">github使用笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-22T22:00:21+08:00">
                2019-12-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="github使用笔记"><a href="#github使用笔记" class="headerlink" title="github使用笔记"></a>github使用笔记</h1><p>I、在readme.md添加图片有两种方式</p>
<pre><code>![image]xxx
&lt;img src=&quot;xxx&quot;&gt;</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/git%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="timegambler">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/git%E5%91%BD%E4%BB%A4/" itemprop="url">git命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-22T22:00:21+08:00">
                2019-12-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="git命令"><a href="#git命令" class="headerlink" title="git命令"></a>git命令</h1><p>1、撤销add</p>
<pre><code># 如果是文件git rm --cached &lt;file&gt;

#如果是文件夹
git rm --cached -r &lt;dir&gt;</code></pre><p>2、去除commit历史记录</p>
<pre><code>1.新建分支

   git checkout --orphan latest_branch

2. 添加文件

   git add -A

3. 提交

   git commit -am &quot;commit message&quot;


4. 删除主分支

   git branch -D master

5.将新分支重命名为主分支

   git branch -m master

6.push到主分支中

   git push -f origin master</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/matplotlib%E4%B9%8B%E9%A5%BC%E5%9B%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="timegambler">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/matplotlib%E4%B9%8B%E9%A5%BC%E5%9B%BE/" itemprop="url">matplotlib之饼图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-22T22:00:21+08:00">
                2019-12-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="matplotlib之饼图"><a href="#matplotlib之饼图" class="headerlink" title="matplotlib之饼图"></a>matplotlib之饼图</h1><p>I、饼状图<br>1、pyplot.pie函数</p>
<pre><code>matplotlib.pyplot.pie(x, explode=None, labels=None, colors=None, autopct=None, pctdistance=0.6, shadow=False, labeldistance=1.1, startangle=None, radius=None, counterclock=True, wedgeprops=None, textprops=None, center=(0, 0), frame=False, rotatelabels=False, *, data=None)</code></pre><p>2、主要参数说明<br>布尔类型，可选参数，默认为：False。如果为True，旋转每个label到指定的角度。</p>
<p>III、官方文档链接<br><a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.pie.html?highlight=pie#matplotlib.pyplot.pie" target="_blank" rel="noopener">https://matplotlib.org/api/_as_gen/matplotlib.pyplot.pie.html?highlight=pie#matplotlib.pyplot.pie</a><br>IV、代码测试</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/9/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">timegambler</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">89</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">timegambler</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
